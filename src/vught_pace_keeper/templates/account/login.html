{% extends "base.html" %}
{% load i18n %}

{% block title %}Sign In - Vught Pace Keeper{% endblock %}

{% block content %}
<div class="max-w-md mx-auto py-12">
    <div class="text-center mb-8">
        <h1 class="text-2xl font-bold mb-2">Welcome Back</h1>
        <p class="text-gray-500">Sign in to continue to your training plans</p>
    </div>

    <!-- Strava Login -->
    <a href="{% url 'strava_login' %}" class="btn btn-strava w-full justify-center mb-6">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="white" aria-hidden="true">
            <path d="M15.387 17.944l-2.089-4.116h-3.065L15.387 24l5.15-10.172h-3.066m-7.008-5.599l2.836 5.598h4.172L10.463 0l-7 13.828h4.169"/>
        </svg>
        Continue with Strava
    </a>

    <div class="relative my-6">
        <div class="absolute inset-0 flex items-center">
            <div class="w-full border-t border-gray-200"></div>
        </div>
        <div class="relative flex justify-center text-sm">
            <span class="px-4 bg-white text-gray-500">or sign in with email</span>
        </div>
    </div>

    <!-- Email Login Form -->
    <div class="card">
        <form method="post" action="{% url 'account_login' %}">
            {% csrf_token %}

            <div class="form-group">
                <label for="id_login" class="form-label">Email</label>
                <input type="email" name="login" id="id_login"
                       class="form-input" placeholder="you@example.com" required autofocus>
            </div>

            <div class="form-group">
                <label for="id_password" class="form-label">Password</label>
                <input type="password" name="password" id="id_password"
                       class="form-input" placeholder="Your password" required>
            </div>

            <div class="flex items-center justify-between mb-6">
                <label class="flex items-center">
                    <input type="checkbox" name="remember" class="rounded border-gray-300 text-strava focus:ring-strava">
                    <span class="ml-2 text-sm text-gray-600">Remember me</span>
                </label>
                <a href="{% url 'account_reset_password' %}" class="text-sm text-strava hover:text-strava-dark">
                    Forgot password?
                </a>
            </div>

            {% if form.errors %}
            <div class="mb-4 p-3 bg-red-50 border border-red-200 rounded text-red-700 text-sm">
                {% for field in form %}
                    {% for error in field.errors %}
                        <p>{{ error }}</p>
                    {% endfor %}
                {% endfor %}
                {% for error in form.non_field_errors %}
                    <p>{{ error }}</p>
                {% endfor %}
            </div>
            {% endif %}

            <button type="submit" class="btn btn-secondary w-full justify-center">
                Sign In
            </button>
        </form>
    </div>

    <p class="text-center text-sm text-gray-500 mt-6">
        Don't have an account?
        <a href="{% url 'account_signup' %}" class="text-strava hover:text-strava-dark font-medium">Sign up</a>
    </p>
</div>
{% endblock %}
